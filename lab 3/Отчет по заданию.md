# –û—Ç—á–µ—Ç –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ ‚Ññ3
## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–≤—É—Ö GPU

## –í–≤–µ–¥–µ–Ω–∏–µ

–í –¥–∞–Ω–Ω–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ –±—ã–ª–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã ‚Ññ2 –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–¥–≤—É—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ (GPU)** –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö GPU –∏ –æ—Ü–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ (—Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 610√ó381 –ø–∏–∫—Å–µ–ª–µ–π)
- –¢—Ä–∏ —Ç–∏–ø–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤: **—Ä–∞–∑–º—ã—Ç–∏–µ**, **–≤—ã–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü**, **—à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ**
- –î–≤–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö GPU Tesla V100-PCIE-16GB

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GPU:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | GPU 0 | GPU 1 |
|----------|-------|-------|
| **–ú–æ–¥–µ–ª—å** | Tesla V100-PCIE-16GB | Tesla V100-PCIE-16GB |
| **–ü–∞–º—è—Ç—å** | 16 –ì–ë | 16 –ì–ë |
| **–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —è–¥—Ä–∞** | 5120 | 5120 |
| **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** | 898 –ì–ë/—Å | 898 –ì–ë/—Å |
| **–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–º—è—Ç–∏** | 53% | 4% |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –æ–¥–Ω–æ–º GPU, –Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

\`\`\`cpp
// –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –¥–≤—É—Ö GPU –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
std::future<std::pair<float, bool>> future0 = std::async(std::launch::async, 
    process_gpu_wrapper, std::ref(input), std::ref(output), filter_type, 0, start1, end1);

std::future<std::pair<float, bool>> future1 = std::async(std::launch::async, 
    process_gpu_wrapper, std::ref(input), std::ref(output), filter_type, 1, start2, end2);
\`\`\`

### 2. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ–ª–∏—Ç—Å—è –ø–æ–ø–æ–ª–∞–º –º–µ–∂–¥—É GPU:
- **GPU 0:** –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ–≤–∏–Ω–∞ (49-50% —Å—Ç—Ä–æ–∫)
- **GPU 1:** –ù–∏–∂–Ω—è—è –ø–æ–ª–æ–≤–∏–Ω–∞ (50-51% —Å—Ç—Ä–æ–∫)

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü:
\`\`\`cpp
// –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏
int extended_height = height + 2;
std::vector<unsigned char> extended_input(width * extended_height * channels);
\`\`\`

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **\`process_part_parallel()\`** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º GPU
2. **\`apply_filter_parallel_gpu()\`** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏  
3. **\`process_gpu_wrapper()\`** - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ \`std::async\` –¥–ª—è **–∏—Å—Ç–∏–Ω–Ω–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏**
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ GPU

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç —Å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º (—Å —à—É–º–æ–º)

| –§–∏–ª—å—Ç—Ä | –í—Ä–µ–º—è GPU0 | –í—Ä–µ–º—è GPU1 | –û–±—â–µ–µ –≤—Ä–µ–º—è | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|--------|------------|------------|-------------|---------------|
| **Blur** | 0.401 ms | 0.263 ms | 6.17 ms | 3.25% |
| **Edge** | 0.308 ms | 0.293 ms | 6.514 ms | 2.36% |
| **Denoise** | 0.419 ms | 0.326 ms | 5.397 ms | 3.88% |

### –¢–µ—Å—Ç —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º

| –§–∏–ª—å—Ç—Ä | –í—Ä–µ–º—è GPU0 | –í—Ä–µ–º—è GPU1 | –û–±—â–µ–µ –≤—Ä–µ–º—è | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|--------|------------|------------|-------------|---------------|
| **Blur** | 0.392 ms | 0.473 ms | 5.725 ms | 4.13% |
| **Edge** | 0.335 ms | 0.294 ms | 6.599 ms | 2.54% |
| **Denoise** | 0.377 ms | 0.503 ms | 5.439 ms | 4.62% |

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏**
- ‚úÖ **–õ—É—á—à–µ–µ –≤—Ä–µ–º—è:** Edge detection (0.293-0.335 ms –Ω–∞ GPU)
- ‚ùå **–•—É–¥—à–µ–µ –≤—Ä–µ–º—è:** Denoise filter (0.377-0.503 ms –Ω–∞ GPU)
- üîÑ **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ GPU:** 0.75x - 1.52x

### 2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏**
- ‚ùå **–ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (2.36%-4.62%)** –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–∞:
  - –ù–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
  - –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
  - –†–∞–∑–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π GPU (53% vs 4%)
  - –í—Ä–µ–º–µ–Ω–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É CPU –∏ GPU

### 3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–¥–Ω–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π**

**–õ–∞–±. —Ä–∞–±–æ—Ç–∞ ‚Ññ2 (–æ–¥–∏–Ω GPU):**
- ‚ö° Blur: 0.155-0.218 ms
- ‚ö° Edge: 0.086-0.088 ms  
- ‚ö° Denoise: 0.108-0.109 ms

**–õ–∞–±. —Ä–∞–±–æ—Ç–∞ ‚Ññ3 (–¥–≤–∞ GPU):**
- üê¢ –û–±—â–µ–µ –≤—Ä–µ–º—è: 5.397-6.599 ms

**–í—ã–≤–æ–¥:** –ú–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ **—Ö—É–¥—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –∏–∑-–∑–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
